import BButton from "@/components/Base/BButton";
import BInput from "@/components/Base/BInput";
import BModal from "@/components/Base/BModal";
import BSafeAreaView from "@/components/Base/BSafeAreaView";
import BText from "@/components/Base/BText";
import BView from "@/components/Base/BView";
import DarkLightToggle from "@/components/Base/DarkLightToggle";
import { useUserListContextImmer } from "@/contexts/UserListProvider";
import { ILoginAccount } from "@/types/ILoginAccount";
import { cn } from "@/utils/cn";
import React from "react";
import { ScrollView } from "react-native";
import { useSafeAreaInsets } from "react-native-safe-area-context";
import { useImmer } from "use-immer";

export interface EditUserModalProps {
  visible?: boolean;
  onClose?: () => void;
  user?: ILoginAccount;
}

function EditUserModal(props: EditUserModalProps) {
  const {
    //
    user: userInit,
    visible,
    onClose,
  } = props;

  // eslint-disable-next-line @typescript-eslint/no-unused-vars
  const [list, setList] = useUserListContextImmer();
  const { bottom } = useSafeAreaInsets();

  const [user, setUserImmer] = useImmer<ILoginAccount>(
    userInit || {
      useId: String(new Date().getTime()),
      username: "",
      password: "",
    },
  );

  let show = false;

  return (
    <BModal visible={visible}>
      <BSafeAreaView excludeEdges={["top"]}>
        <ScrollView>
          <BView
            className={cn("pt-10", {
              "pb-5": bottom === 0,
            })}
          >
            <BInput
              value={user.useId}
              placeholder="ID"
              className="container mb-4"
              onChangeText={(text) => {
                setUserImmer((u) => {
                  u.useId = text;
                });
              }}
            />

            <BInput
              value={user.username}
              placeholder="Tên đăng nhập"
              className="container mb-4"
              onChangeText={(text) => {
                setUserImmer((u) => {
                  u.username = text;
                });
              }}
            />

            <BInput
              value={user.password}
              placeholder="Mật khẩu"
              className="container mb-4"
              onChangeText={(text) => {
                setUserImmer((u) => {
                  u.password = text;
                });
              }}
            />

            <BView className="container flex-row justify-center space-x-4">
              <BButton
                block
                primary
                onPress={() => onClose?.()}
              >
                Lưu
              </BButton>

              <BButton
                block
                onPress={() => onClose?.()}
              >
                Huỷ
              </BButton>

              <DarkLightToggle />
            </BView>

            {show && (
              <BText>
                123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123
                123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123
                123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123
                123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123123 123 123 123 123 123 123 123 123 123 123 123 123
                123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123
                123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123
                123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123
                123 123 123 123 123 123 123 123123 123 123 123 123 123 123 123 123 123 123 123123 123 123 123 123 123 123 123 123 123 123 123 123 123
                123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123
                123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123
                123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123
                123 123 123 123 123 123 123123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123
                123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123
                123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123
                123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123123 123 123 123 123 123 123
                123 123 123 123 123123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123
                123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123
                123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123
                123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123123 123 123 123 123 123 123 123 123
                123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123
                123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123
                123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123
                123 123 123 123 123 123 123 123 123 123 123 123123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123
                123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123123 123 123 123 123 123 123 123 123 123 123 123
                123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123
                123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123
                123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123
                123 123 123 123 123 123 123 123 123123 123 123 123 123 123 123 123 123 123 123 123123 123 123 123 123 123 123 123 123 123 123 123 123
                123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123
                123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123
                123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123
                123 123 123 123 123 123 123 123123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123
                123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123
                123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123
                123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123 123123 123 123 123 123 123
                123 123 123 123 123 123 end
              </BText>
            )}
          </BView>
        </ScrollView>
      </BSafeAreaView>
    </BModal>
  );
}

export default EditUserModal;
